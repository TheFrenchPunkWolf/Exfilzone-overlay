<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Exfilzone Overlay</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  background:transparent;
  color:white;
  font-family:Arial Black, sans-serif;
}
.box{
  background:rgba(0,0,0,.6);
  border:2px solid #2bd2ff;
  box-shadow:0 0 15px #2bd2ff;
  padding:15px;
  width:280px;
}
.stat{
  font-size:28px;
}
.timer{
  font-size:36px;
  color:#ff3cac;
}
</style>
</head>

<body>
<div class="box">
  <div class="stat">ğŸ”¥ KILLS <span id="kills">0</span></div>
  <div class="stat">ğŸ’€ MORTS <span id="deaths">0</span></div>
  <div class="stat">ğŸ¯ RAIDS <span id="raids">0</span></div>
  <div class="stat">ğŸ“Š K/D <span id="kd">0.00</span></div>
  <div class="timer">â± <span id="timer">00:00</span></div>
</div>

<script>
// FIREBASE
firebase.initializeApp({
  apiKey:"AIzaSyCfIO5AIHqXT8m134ynF8dr5t-SfNNjA8k",
  databaseURL:"https://exfilzone-overlay-default-rtdb.europe-west1.firebasedatabase.app"
});
const ref=firebase.database().ref("exfilzone");
let raidStart=0;

ref.on("value", s=>{
  const d=s.val()||{};
  kills.innerText=d.kills||0;
  deaths.innerText=d.deaths||0;
  raids.innerText=d.raids||0;
  raidStart=d.raidStart||0;
  kd.innerText=((d.deaths?d.kills/d.deaths:d.kills)||0).toFixed(2);
});

// TIMER LIVE
function updateTimer(){
  if(!raidStart){
    timer.innerText="00:00";
  }else{
    const t=Math.floor((Date.now()-raidStart)/1000);
    timer.innerText=
      String(Math.floor(t/60)).padStart(2,"0")+":"+
      String(t%60).padStart(2,"0");
  }
  requestAnimationFrame(updateTimer);
}
updateTimer();
</script>
</body>
</html>
