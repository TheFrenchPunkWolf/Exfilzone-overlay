<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Exfilzone Overlay</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  margin:0;
  background:transparent;
  color:white;
  font-family:Arial Black, sans-serif;
}

.box{
  background:rgba(0,0,0,0.65);
  border:2px solid #2bd2ff;
  box-shadow:0 0 20px #2bd2ff;
  padding:16px;
  width:280px;
}

.stat{
  font-size:28px;
  margin-bottom:6px;
}

.timer{
  font-size:38px;
  color:#ff3cac;
  text-shadow:0 0 10px #ff3cac, 0 0 20px #2bd2ff;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="box">
  <div class="stat">ğŸ”¥ KILLS <span id="kills">0</span></div>
  <div class="stat">ğŸ’€ MORTS <span id="deaths">0</span></div>
  <div class="stat">ğŸ¯ RAIDS <span id="raids">0</span></div>
  <div class="stat">ğŸ“Š K/D <span id="kd">0.00</span></div>
  <div class="timer">â± <span id="timer">00:00</span></div>
</div>

<script>
// ğŸ”¥ CONFIG FIREBASE (REMPLACE PAR TES INFOS)
firebase.initializeApp({
  apiKey: "AIzaSyCfIO5AIHqXT8m134ynF8dr5t-SfNNjA8k",
  databaseURL: "https://exfilzone-overlay-default-rtdb.europe-west1.firebasedatabase.app"
});

const ref = firebase.database().ref("exfilzone");

let raidStart = 0;

// ğŸ”„ SYNCHRO FIREBASE
ref.on("value", snapshot => {
  const d = snapshot.val() || {};

  document.getElementById("kills").innerText = d.kills || 0;
  document.getElementById("deaths").innerText = d.deaths || 0;
  document.getElementById("raids").innerText = d.raids || 0;

  const kd = (d.deaths ? d.kills / d.deaths : d.kills || 0);
  document.getElementById("kd").innerText = kd.toFixed(2);

  raidStart = d.raidStart || 0;
});

// â± TIMER OBS (SETINTERVAL = FIABLE)
setInterval(() => {

  if (!raidStart) {
    document.getElementById("timer").innerText = "00:00";
    return;
  }

  const elapsed = Math.floor((Date.now() - raidStart) / 1000);
  const minutes = String(Math.floor(elapsed / 60)).padStart(2, "0");
  const seconds = String(elapsed % 60).padStart(2, "0");

  document.getElementById("timer").innerText = `${minutes}:${seconds}`;

}, 1000);
</script>

</body>
</html>
